<html>

<head>
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
</head>

<body>
    <script>
        const key = CryptoJS.enc.Hex.parse('example'); // Replace with your actual key
        const iv = CryptoJS.lib.WordArray.random(16); // Random IV

        const jsonObject = { token: "MORSKA SASA" };

        async function sendData() {
            console.log('Sending data to server:', jsonObject);
            const jsonString = JSON.stringify(jsonObject.token);
            const encrypted = CryptoJS.AES.encrypt(jsonString, key, { iv });

            const token = `${iv.toString(CryptoJS.enc.Hex)}:${encrypted.toString()}`;

            const response = await fetch('http://localhost:3000/your-endpoint', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ token })
            });

            if (response.ok) {
                const data = await response.json();
                console.log('Response from server:', data);
            } else {
                console.error('Failed to send encrypted token:', response.statusText);
            }
        }
    </script>
    <button onclick="sendData()">Send Data</button>
</body>

</html>